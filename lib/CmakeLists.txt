set(BUILD_SHARED_LIBS true)

set(LIBPUD_SRC pud.c jpeg.c)

include_directories(
   ${CMAKE_CURRENT_SOURCE_DIR}
   ${CMAKE_CURRENT_SOURCE_DIR}/../include
   ${JPEG_INCLUDES_DIR}
)

add_library(libpud SHARED ${LIBPUD_SRC})

target_link_libraries(libpud ${JPEG_LIBRARIES})

install(
   TARGETS libpud
   LIBRARY DESTINATION lib
   ARCHIVE DESTINATION lib/static
)

